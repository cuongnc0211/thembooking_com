<%= form_with(model: [:dashboard, service], class: "space-y-6") do |form| %>
  <% if service.errors.any? %>
    <div class="bg-red-50 border border-red-100 text-red-700 px-4 py-3 rounded-xl">
      <h3 class="font-medium"><%= t('common.errors_header') %></h3>
      <ul class="list-disc list-inside mt-2">
        <% service.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :name, t('views.dashboard.services.form.name_label'), class: "form-label" %>
    <%= form.text_field :name, class: "form-input", placeholder: t('views.dashboard.services.form.name_placeholder') %>
  </div>

  <div>
    <%= form.label :description, t('views.dashboard.services.form.description_label'), class: "form-label" %>
    <%= form.text_area :description, rows: 3, class: "form-input", placeholder: t('views.dashboard.services.form.description_placeholder') %>
  </div>

  <div>
    <%= form.label :duration_minutes, t('views.dashboard.services.form.duration_label'), class: "form-label" %>
    <%= form.select :duration_minutes,
        options_for_select([
          [t('views.dashboard.services.form.duration_15'), 15],
          [t('views.dashboard.services.form.duration_30'), 30],
          [t('views.dashboard.services.form.duration_45'), 45],
          [t('views.dashboard.services.form.duration_60'), 60],
          [t('views.dashboard.services.form.duration_90'), 90],
          [t('views.dashboard.services.form.duration_120'), 120]
        ], service.duration_minutes),
        { prompt: t('views.dashboard.services.form.duration_prompt') },
        class: "form-input" %>
    <p class="mt-1.5 text-sm text-slate-500"><%= t('views.dashboard.services.form.duration_hint') %></p>
  </div>

  <div>
    <%= form.label :price, t('views.dashboard.services.form.price_label'), class: "form-label" %>
    <div class="relative mt-1">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <span class="text-slate-500 sm:text-sm">â‚«</span>
      </div>
      <%= form.number_field :price,
          value: service.persisted? ? (service.price_cents / 100.0).to_i : nil,
          step: 1000,
          min: 0,
          class: "form-input pl-8",
          placeholder: t('views.dashboard.services.form.price_placeholder') %>
    </div>
    <p class="mt-1.5 text-sm text-slate-500"><%= t('views.dashboard.services.form.price_hint') %></p>
  </div>

  <div class="flex items-center">
    <%= form.check_box :active, class: "h-4 w-4 text-primary-600 focus:ring-primary-500 border-slate-300 rounded transition-colors" %>
    <%= form.label :active, t('views.dashboard.services.form.active_label'), class: "ml-2 block text-sm text-slate-900" %>
    <p class="ml-2 text-xs text-slate-500"><%= t('views.dashboard.services.form.active_hint') %></p>
  </div>

  <div class="flex items-center gap-4 pt-4 border-t border-slate-100">
    <%= form.submit service.persisted? ? t('views.dashboard.services.form.submit_update') : t('views.dashboard.services.form.submit_create'), class: "btn-primary cursor-pointer" %>
    <%= link_to t('common.actions.cancel'), dashboard_services_path, class: "btn-ghost" %>
  </div>
<% end %>
