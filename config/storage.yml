# Test environment - uses tmp/storage (ephemeral)
test:
  service: Disk
  root: <%= Rails.root.join("tmp/storage") %>

# Development environment - uses local storage directory
local:
  service: Disk
  root: <%= Rails.root.join("storage") %>

# =============================================================================
# Cloudflare R2 Configuration (S3-compatible)
# =============================================================================
# Used for development (optional), staging, and production environments
# Credentials stored in Rails encrypted credentials

# Development environment R2 bucket (optional - use via ACTIVE_STORAGE_SERVICE=development_r2)
development_r2:
  service: S3
  endpoint: <%= "https://#{Rails.application.credentials.dig(:cloudflare_r2, :account_id)}.r2.cloudflarestorage.com" %>
  access_key_id: <%= Rails.application.credentials.dig(:cloudflare_r2, :access_key_id) %>
  secret_access_key: <%= Rails.application.credentials.dig(:cloudflare_r2, :secret_access_key) %>
  bucket: thembooking-test
  region: auto
  force_path_style: true
  upload:
    checksum_algorithm: null

# Staging environment R2 bucket
staging_r2:
  service: S3
  endpoint: <%= "https://#{Rails.application.credentials.dig(:cloudflare_r2, :account_id)}.r2.cloudflarestorage.com" %>
  access_key_id: <%= Rails.application.credentials.dig(:cloudflare_r2, :access_key_id) %>
  secret_access_key: <%= Rails.application.credentials.dig(:cloudflare_r2, :secret_access_key) %>
  bucket: thembooking-test
  region: auto
  force_path_style: true
  upload:
    checksum_algorithm: null

# Production environment R2 bucket
production_r2:
  service: S3
  endpoint: <%= "https://#{Rails.application.credentials.dig(:cloudflare_r2, :account_id)}.r2.cloudflarestorage.com" %>
  access_key_id: <%= Rails.application.credentials.dig(:cloudflare_r2, :access_key_id) %>
  secret_access_key: <%= Rails.application.credentials.dig(:cloudflare_r2, :secret_access_key) %>
  bucket: them-booking-prod
  region: auto
  force_path_style: true
  upload:
    checksum_algorithm: null
