# Production environment configuration
# Deploy with: kamal deploy -d production
#
# ⚠️  WARNING: Before first deployment, ensure DNS is configured:
#     A Record: thembooking.com → 157.230.246.140
#     Let's Encrypt SSL will fail without proper DNS!

# Server configuration
servers:
  web:
    hosts:
      - 157.230.246.140
    proxy: true
  worker:
    hosts:
      - 157.230.246.140
    cmd: bin/jobs

# Traefik proxy configuration with Let's Encrypt SSL
proxy:
  host: thembooking.com
  app_port: 3000
  ssl: true
  healthcheck:
    path: /up
    interval: 10

# Production-specific environment variables
env:
  clear:
    RAILS_ENV: production
    RAILS_LOG_LEVEL: info   # Standard logging
    WEB_CONCURRENCY: 2      # 2 Puma workers for better performance
    JOB_CONCURRENCY: 3      # More job workers for production
